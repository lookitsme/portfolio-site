const fs = require('fs');

// ===== INPUT =====
const pathD = 
`M224.546 69.2196C219.266 70.5396 213.986 71.8596 199.386 76.4996C184.786 81.1396 161.026 89.0596 148.291 93.6346C135.556 98.2096 134.566 99.1996 136.531 100.04C138.496 100.88 143.446 101.54 179.821 99.5696C216.196 97.5996 283.846 92.9796 373.311 80.6996C462.776 68.4196 572.006 48.6196 669.361 35.6146C766.716 22.6096 848.886 16.9996 794.031 45.9546C739.176 74.9096 544.806 138.6 443.851 172.07C342.896 205.54 341.246 206.86 340.396 208.035C339.546 209.21 339.546 210.2 340.206 210.875C340.866 211.55 342.186 211.88 345.341 212.38C348.496 212.88 353.446 213.54 451.861 201.835C550.276 190.13 742.006 166.04 848.201 153.63C954.396 141.22 969.246 141.22 966.666 146.335C964.086 151.45 943.626 161.68 800.096 200.445C656.566 239.21 390.586 306.2 252.081 341.7C113.576 377.2 110.606 379.18 112.706 380.86C114.806 382.54 122.066 383.86 132.241 384.87C142.416 385.88 155.286 386.54 339.456 369.225C523.626 351.91 878.706 316.6 1032.42 309.135C1186.14 301.67 1127.73 323.12 1011.01 353.475C894.296 383.83 721.046 422.44 630.311 442.99C539.576 463.54 536.606 464.86 535.736 466.035C534.866 467.21 536.186 468.2 659.626 463.595C783.066 458.99 1028.59 448.76 1035.28 475.995C1041.97 503.23 802.386 568.24 679.461 602.225C556.536 636.21 557.526 637.2 698.451 631.275C839.376 625.35 1120.21 612.48 1249.7 611.46C1379.19 610.44 1348.83 621.66 1209.93 651.035C1071.04 680.41 824.526 727.6 690.276 754.385C556.026 781.17 541.506 786.12 531.881 789.825C522.256 793.53 517.966 795.84 519.881 798.02C521.796 800.2 530.046 802.18 723.221 789.67C916.396 777.16 1294.25 750.1 1487.58 736.16C1680.91 722.22 1678.27 722.22 1536.16 732.78C1394.06 743.34 1112.57 764.46 969.041 775.34C825.516 786.22 828.486 786.22 894.366 772.195C960.246 758.17 1088.95 730.12 1221.55 701.22
M1215.55 138.22C1197.73 142.84 1179.91 147.46 1155.05 153.965C1130.2 160.47 1098.85 168.72 1082.7 173.465C1066.55 178.21 1066.55 179.2 1067.7 179.875C1068.86 180.55 1071.17 180.88 1144.46 179.4C1217.76 177.92 1361.97 174.62 1439.56 173.25C1517.15 171.88 1523.75 172.54 1528.63 173.21C1533.52 173.88 1536.49 174.54 1536.53 176.86C1536.58 179.18 1533.61 183.14 1517.56 192.77C1501.51 202.4 1472.47 217.58 1396.29 247.345C1320.12 277.11 1197.69 321 1138.58 343.94C1079.47 366.88 1087.39 367.54 1167.7 360.95C1248.01 354.36 1400.47 340.5 1487.92 333.525C1575.37 326.55 1593.19 326.88 1601.38 328.205C1609.57 329.53 1607.59 331.84 1603.1 335.34C1598.62 338.84 1591.69 343.46 1562.05 355.905C1532.41 368.35 1480.27 388.48 1377.51 418.485C1274.75 448.49 1122.95 487.76 1048.38 509.805C973.806 531.85 981.066 535.48 998.666 539.33C1016.27 543.18 1043.99 547.14 1056.62 549.84C1069.25 552.54 1065.95 553.86 999.731 563.45C933.516 573.04 804.486 590.86 644.296 602.35C484.106 613.84 296.666 618.46 199.116 621.005C101.566 623.55 99.5862 623.88 180.076 600.95C260.566 578.02 423.586 531.82 501.131 508.35C578.676 484.88 565.806 485.54 474.366 500.895C382.926 516.25 213.306 546.28 123.121 561.75C32.9362 577.22 27.3262 577.22 24.9312 577.385C22.5362 577.55 23.5262 577.88 144.816 564.85C266.106 551.82 507.666 525.42 632.766 511.655C757.866 497.89 759.186 497.56 673.241 526.925C587.296 556.29 414.046 615.36 324.136 646.45C234.226 677.54 232.906 678.86 232.556 680.035C232.206 681.21 232.866 682.2 239.641 684.03C246.416 685.86 259.286 688.5 344.951 690.19C430.616 691.88 588.686 692.54 670.611 693.21C752.536 693.88 753.526 694.54 753.376 695.21C753.226 695.88 751.906 696.54 669.386 718.495C586.866 740.45 423.186 783.68 341.506 806.28C259.826 828.88 265.106 829.54 400.981 800.18C536.856 770.82 803.166 711.42 947.451 678.015C1091.74 644.61 1105.93 639 1112.91 635.615C1119.89 632.23 1119.23 631.24 1118.23 630.565C1108.69 624.125 1084.29 623.58 1075.4 619.07C1073.92 618.316 1073.89 616.58 1074.54 614.745C1075.2 612.91 1076.85 610.6 1081.49 606.77C1086.14 602.94 1093.73 597.66 1135.42 578.77C1177.12 559.88 1252.69 527.54 1283.7 510.88C1314.71 494.22 1298.87 494.22 1291.04 493.065C1283.21 491.91 1283.87 489.6 1288.33 486.265C1292.8 482.93 1301.05 478.64 1330.71 471.48C1360.37 464.32 1411.19 454.42 1446.61 449.32C1482.03 444.22 1500.51 444.22 1510.52 444.385C1520.54 444.55 1521.53 444.88 1521.87 446.37C1522.22 447.86 1521.89 450.5 1516.11 456.15C1510.33 461.8 1499.11 470.38 1463.3 490.31C1427.49 510.24 1367.43 541.26 1336.16 558.23C1304.89 575.2 1304.23 577.18 1304.38 578.53C1305.1 584.747 1317.52 585.88 1331.92 588.2C1343.32 590.037 1363.15 592.5 1375.33 594.355C1391.53 596.822 1398.85 599.54 1405 602.695C1408.02 604.243 1410.17 606.84 1411.19 610.835C1413.58 620.163 1409.24 630.18 1403.59 638.985C1400.42 643.936 1395.97 649.44 1383.2 661.9C1370.43 674.36 1349.31 693.5 1338.1 704.02C1326.89 714.54 1326.23 715.86 1326.05 717.2C1325.88 718.54 1326.21 719.86 1343.21 723.51C1360.21 727.16 1393.87 733.1 1417.48 736.82C1441.09 740.54 1453.63 741.86 1458.6 743.86C1463.58 745.86 1460.61 748.5 1440.1 760.75C1419.6 773 1381.65 794.78 1360.94 807.155C1340.24 819.53 1337.93 821.84 1337.56 823.69C1337.2 825.54 1338.85 826.86 1340.69 827.705C1342.53 828.55 1344.51 828.88 1361.7 829.71C1378.89 830.54 1411.23 831.86 1444.55 833.22
`;


const VIEWBOX_WIDTH = 1698;
const VIEWBOX_HEIGHT = 811;
const SAMPLES_PER_CURVE = 12;

// ===== Bézier helper =====
function cubicBezier(p0, p1, p2, p3, t) {
  const mt = 1 - t;
  return {
    x:
      mt * mt * mt * p0.x +
      3 * mt * mt * t * p1.x +
      3 * mt * t * t * p2.x +
      t * t * t * p3.x,
    y:
      mt * mt * mt * p0.y +
      3 * mt * mt * t * p1.y +
      3 * mt * t * t * p2.y +
      t * t * t * p3.y,
  };
}

// ===== Robust tokenization (commands + floats) =====
const tokens = pathD.match(/[a-zA-Z]|-?\d*\.?\d+(?:e[-+]?\d+)?/gi);
let i = 0;
let current = { x: 0, y: 0 };
const points = [];

while (i < tokens.length) {
  const cmd = tokens[i++];

  if (cmd === 'M') {
    current = { x: parseFloat(tokens[i++]), y: parseFloat(tokens[i++]) };
    // Add current point to start the segment
    points.push([
      +(current.x / VIEWBOX_WIDTH).toFixed(4),
      +(current.y / VIEWBOX_HEIGHT).toFixed(4),
      0,
    ]);
  }

  if (cmd === 'C') {
    const p1 = { x: parseFloat(tokens[i++]), y: parseFloat(tokens[i++]) };
    const p2 = { x: parseFloat(tokens[i++]), y: parseFloat(tokens[i++]) };
    const p3 = { x: parseFloat(tokens[i++]), y: parseFloat(tokens[i++]) };

    for (let t = 0; t <= 1; t += 1 / SAMPLES_PER_CURVE) {
      const p = cubicBezier(current, p1, p2, p3, t);
      points.push([
        +(p.x / VIEWBOX_WIDTH).toFixed(4),
        +(p.y / VIEWBOX_HEIGHT).toFixed(4),
        0,
      ]);
    }

    current = p3;
  }
}

// ===== Write JS file =====
const output = `export default ${JSON.stringify(points, null, 2)};\n`;
fs.writeFileSync('pathPoints.js', output);

console.log(`✔ Saved ${points.length} points to pathPoints.js`);
